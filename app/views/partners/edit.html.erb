<% @page_title = "#{@partner.name} 編集" %>

<div class="container mt-5">
  <div class="row">
    <div class="col-11 col-md-6 mx-auto">
        <h4>基本情報</h4>
        <p>一番下の更新ボタンを押すと内容が確定します。<span style="color: red;">*</span>必須項目は必ず記入してください。</p>

          <%= form_with model: @partner, local: true do |f| %>
            <div class="mb-3">
            <%= f.label :name, "*パートナーの名前", class: "form-label" %>
            <%= f.text_field :name, class: "form-control" %>
            </div>

            <div class="mb-1">
            <%= f.label :パートナーの画像を選択, class: "form-label" %>
            <%= f.file_field :image, class: "form-control" %>
            </div>
            
            <!-- プレビュー -->
            <% if @partner.image.attached? %>
            <div class="row g-1"> 
              <div class="mb-3 col-2 position-relative" id="image-partner">
                <%= image_tag @partner.image, class: "custom-show-img  img-thumbnail", alt: @partner.name %>

                    <!-- 削除ボタン -->
                    <%= link_to "", remove_image_partner_path(@partner),
                      method: :delete,
                      data: { confirm: "この画像を削除しますか？", remote: true },
                      class: "btn-close position-absolute",
                      style: "top: 0; right: 0; color: red; text-decoration: none; font-size: 1.5em;" %>
              </div>
            </div>
            <% end %>

            <div class="mb-3">
            <%= f.label :animal_type, "*動物の種類", class: "form-label" %>
            <%= f.text_field :animal_type, class: "form-control", placeholder: '例：犬、猫など' %>
            </div>
  
            <div class="mb-3">
            <%= f.label :breed, "さらに詳しい種類", class: "form-label" %>
            <%= f.text_field :breed, class: "form-control", placeholder: '例：柴犬、マルチーズなど' %>
            </div>
  
            <div class="mb-3">
            <%= f.label :gender, "*性別", class: "form-label" %>
            <%= f.select :gender, [["オス", "male"], ["メス", "female"], ["性別不明", "unknown"]], {}, class: "form-control" %>
            </div>
  
            <div class="mb-3">
            <%= f.label :birthday, "生年月日", class: "form-label" %>
            <%= f.date_field :birthday, class: "form-control" %>
            </div>
  
            <div class="mb-3">
            <%= f.label :weight, "体重", class: "form-label" %>
            <%= f.text_field :weight, class: "form-control" %>
            <small>※病院等で最後に量ったものなどをメモ</small>
            </div>

            <div class="mb-5 text-end">
            <%= f.submit '更新', class: 'btn btn-dark' %>
            </div>
          <% end %>

    </div>
  </div>
</div>